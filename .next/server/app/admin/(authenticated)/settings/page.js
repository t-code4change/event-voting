(()=>{var e={};e.id=25,e.ids=[25],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3366:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>r.a,__next_app__:()=>u,originalPathname:()=>h,pages:()=>o,routeModule:()=>p,tree:()=>d}),a(2061),a(5878),a(1506),a(5866);var s=a(3191),n=a(8716),i=a(7922),r=a.n(i),l=a(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);a.d(t,c);let d=["",{children:["admin",{children:["(authenticated)",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,2061)),"/Users/tuanpham/MyLife/CRM-Pacificwide/event-voting/app/admin/(authenticated)/settings/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,5878)),"/Users/tuanpham/MyLife/CRM-Pacificwide/event-voting/app/admin/(authenticated)/layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,1506)),"/Users/tuanpham/MyLife/CRM-Pacificwide/event-voting/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/tuanpham/MyLife/CRM-Pacificwide/event-voting/app/admin/(authenticated)/settings/page.tsx"],h="/admin/(authenticated)/settings/page",u={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/(authenticated)/settings/page",pathname:"/admin/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3611:(e,t,a)=>{Promise.resolve().then(a.bind(a,8973))},8973:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>R});var s=a(326),n=a(7577),i=a(3071),r=a(2397),l=a(4432),c=a(772),d=a(2561),o=a(8051),h=a(3095),u=a(2067),p=a(3405),m=a(2566),x=a(7335),g="Switch",[f,v]=(0,h.b)(g),[y,j]=f(g),b=n.forwardRef((e,t)=>{let{__scopeSwitch:a,name:i,checked:r,defaultChecked:l,required:c,disabled:h,value:p="on",onCheckedChange:m,form:f,...v}=e,[j,b]=n.useState(null),k=(0,o.e)(t,e=>b(e)),w=n.useRef(!1),M=!j||f||!!j.closest("form"),[P,_]=(0,u.T)({prop:r,defaultProp:l??!1,onChange:m,caller:g});return(0,s.jsxs)(y,{scope:a,checked:P,disabled:h,children:[(0,s.jsx)(x.WV.button,{type:"button",role:"switch","aria-checked":P,"aria-required":c,"data-state":C(P),"data-disabled":h?"":void 0,disabled:h,value:p,...v,ref:k,onClick:(0,d.Mj)(e.onClick,e=>{_(e=>!e),M&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})}),M&&(0,s.jsx)(N,{control:j,bubbles:!w.current,name:i,value:p,checked:P,required:c,disabled:h,form:f,style:{transform:"translateX(-100%)"}})]})});b.displayName=g;var k="SwitchThumb",w=n.forwardRef((e,t)=>{let{__scopeSwitch:a,...n}=e,i=j(k,a);return(0,s.jsx)(x.WV.span,{"data-state":C(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})});w.displayName=k;var N=n.forwardRef(({__scopeSwitch:e,control:t,checked:a,bubbles:i=!0,...r},l)=>{let c=n.useRef(null),d=(0,o.e)(c,l),h=(0,p.D)(a),u=(0,m.t)(t);return n.useEffect(()=>{let e=c.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(h!==a&&t){let s=new Event("click",{bubbles:i});t.call(e,a),e.dispatchEvent(s)}},[h,a,i]),(0,s.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...r,tabIndex:-1,ref:d,style:{...r.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function C(e){return e?"checked":"unchecked"}N.displayName="SwitchBubbleInput";var M=a(7863);let P=n.forwardRef(({className:e,...t},a)=>s.jsx(b,{className:(0,M.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:a,children:s.jsx(w,{className:(0,M.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));P.displayName=b.displayName;var _=a(567),S=a(5290),Z=a(8378),q=a(7358),A=a(8998);let E=(0,a(6557).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var I=a(5999);function R(){let[e,t]=(0,n.useState)(null),[a,d]=(0,n.useState)(!0),[o,h]=(0,n.useState)(!1),[u,p]=(0,n.useState)(""),[m,x]=(0,n.useState)(""),[g,f]=(0,n.useState)(!1),v=async()=>{if(!e){I.A.error("Kh\xf4ng c\xf3 sự kiện để cập nhật");return}if(!u||!m){I.A.error("Vui l\xf2ng nhập đầy đủ thời gian");return}if(new Date(u)>=new Date(m)){I.A.error("Thời gian kết th\xfac phải sau thời gian bắt đầu");return}h(!0);try{let a=await fetch("/api/admin/settings",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:e.id,voting_start_time:new Date(u).toISOString(),voting_end_time:new Date(m).toISOString(),is_active:g})});if(!a.ok)throw Error("Failed to update settings");let s=await a.json();t(s.event),I.A.success("Cập nhật c\xe0i đặt th\xe0nh c\xf4ng!")}catch(e){console.error("Error updating settings:",e),I.A.error("Kh\xf4ng thể cập nhật c\xe0i đặt")}finally{h(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"C\xe0i đặt Sự kiện"}),s.jsx("p",{className:"text-muted-foreground",children:"Cấu h\xecnh thời gian v\xe0 trạng th\xe1i sự kiện"})]}),a?s.jsx(i.Zb,{children:s.jsx(i.aY,{className:"p-12 text-center",children:s.jsx(S.Z,{className:"h-12 w-12 animate-spin text-muted-foreground mx-auto"})})}):e?(0,s.jsxs)("div",{className:"grid gap-6 max-w-3xl",children:[(0,s.jsxs)(i.Zb,{children:[s.jsx(i.Ol,{children:(0,s.jsxs)(i.ll,{className:"flex items-center justify-between",children:[s.jsx("span",{children:e.name}),s.jsx(_.C,{variant:g?"default":"secondary",children:g?"Active":"Inactive"})]})}),(0,s.jsxs)(i.aY,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(r._,{htmlFor:"start-time",className:"flex items-center gap-2",children:[s.jsx(q.Z,{className:"h-4 w-4"}),"Thời gian bắt đầu"]}),s.jsx(l.I,{id:"start-time",type:"datetime-local",value:u,onChange:e=>p(e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(r._,{htmlFor:"end-time",className:"flex items-center gap-2",children:[s.jsx(A.Z,{className:"h-4 w-4"}),"Thời gian kết th\xfac"]}),s.jsx(l.I,{id:"end-time",type:"datetime-local",value:m,onChange:e=>x(e.target.value)})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsxs)("div",{children:[s.jsx(r._,{htmlFor:"is-active",className:"text-base font-medium",children:"K\xedch hoạt sự kiện"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Cho ph\xe9p người d\xf9ng b\xecnh chọn"})]}),s.jsx(P,{id:"is-active",checked:g,onCheckedChange:f})]}),s.jsx("div",{className:"pt-4",children:s.jsx(c.z,{onClick:v,disabled:o,className:"w-full md:w-auto",children:o?(0,s.jsxs)(s.Fragment,{children:[s.jsx(S.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Đang lưu..."]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(E,{className:"mr-2 h-4 w-4"}),"Lưu thay đổi"]})})})]})]}),(0,s.jsxs)(i.Zb,{children:[s.jsx(i.Ol,{children:s.jsx(i.ll,{children:"Th\xf4ng tin Hệ thống"})}),(0,s.jsxs)(i.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(r._,{children:"Event ID"}),s.jsx(l.I,{value:e.id,disabled:!0,className:"font-mono text-xs"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(r._,{children:"Mật khẩu Admin"}),s.jsx(l.I,{type:"password",value:"admin123",disabled:!0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Thay đổi trong file .env.local"})]})]})]})]}):s.jsx(i.Zb,{children:(0,s.jsxs)(i.aY,{className:"p-12 text-center space-y-4",children:[s.jsx(Z.Z,{className:"h-12 w-12 text-muted-foreground mx-auto"}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Kh\xf4ng t\xecm thấy sự kiện active"}),s.jsx("p",{className:"text-muted-foreground",children:"Vui l\xf2ng tạo v\xe0 k\xedch hoạt một sự kiện trước"})]})]})})]})}},8998:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(6557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8907:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(6557).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},4061:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(6557).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2061:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(8570).createProxy)(String.raw`/Users/tuanpham/MyLife/CRM-Pacificwide/event-voting/app/admin/(authenticated)/settings/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[276,615,488,735,693,854,668],()=>a(3366));module.exports=s})();