(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65],{3114:function(e,t,s){Promise.resolve().then(s.bind(s,2026))},2026:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return P}});var r=s(7437),a=s(2265),n=s(4196),i=s(8664),l=s(2489),o=s(4508);let c=i.fC;i.xz;let d=i.h_;i.x8;let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a})});u.displayName=i.aV.displayName;let h=a.forwardRef((e,t)=>{let{className:s,children:a,...n}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(i.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...n,children:[a,(0,r.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=i.VY.displayName;let m=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};m.displayName="DialogHeader";let f=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",s),...a})});f.displayName=i.Dx.displayName;let x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",s),...a})});x.displayName=i.dk.displayName;var p=s(2869),g=s(5186),v=s(6815),b=s(5863),j=s(9345),N=s(3041),y=s(6337),F=s(4438);function w(e){let{value:t,onChange:s,length:n=6,disabled:i=!1}=e,l=(0,a.useRef)([]);(0,a.useEffect)(()=>{l.current[0]&&!i&&l.current[0].focus()},[i]);let o=(e,r)=>{let a=r.replace(/\D/g,"");if(0===a.length){let r=t.split("");r[e]="",s(r.join(""));return}if(1===a.length){let r=t.split("");if(r[e]=a,s(r.join("")),e<n-1&&l.current[e+1]){var i;null===(i=l.current[e+1])||void 0===i||i.focus()}}else a.length>1&&d(a)},c=(e,r)=>{var a,i,o;if("Backspace"===r.key){if(!t[e]&&e>0)null===(a=l.current[e-1])||void 0===a||a.focus();else{let r=t.split("");r[e]="",s(r.join(""))}}else"ArrowLeft"===r.key&&e>0?null===(i=l.current[e-1])||void 0===i||i.focus():"ArrowRight"===r.key&&e<n-1&&(null===(o=l.current[e+1])||void 0===o||o.focus())},d=e=>{var t;let r=e.replace(/\D/g,"").slice(0,n);s(r.padEnd(n,""));let a=r.length<n?r.length:n-1;null===(t=l.current[a])||void 0===t||t.focus()},u=e=>{e.preventDefault(),d(e.clipboardData.getData("text"))},h=e=>{var t;null===(t=l.current[e])||void 0===t||t.select()};return(0,r.jsx)("div",{className:"flex gap-2 justify-center",children:Array.from({length:n}).map((e,s)=>(0,r.jsx)(g.I,{ref:e=>{l.current[s]=e},type:"text",inputMode:"numeric",maxLength:1,value:t[s]||"",onChange:e=>o(s,e.target.value),onKeyDown:e=>c(s,e),onPaste:u,onFocus:()=>h(s),disabled:i,className:"w-12 h-14 text-center text-2xl font-semibold rounded-lg border-2 focus:border-primary transition-colors","aria-label":"OTP digit ".concat(s+1)},s))})}var D=s(3260);function E(e){let{show:t,duration:s=5e3,onComplete:n}=e,{width:i,height:l}=function(){let[e,t]=(0,a.useState)({width:0,height:0});return(0,a.useEffect)(()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e}(),[o,c]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{if(t){c(!0);let e=setTimeout(()=>{c(!1),null==n||n()},s);return()=>clearTimeout(e)}},[t,s,n]),o)?(0,r.jsx)(D.Z,{width:i,height:l,recycle:!1,numberOfPieces:500,gravity:.3,colors:["#3b82f6","#8b5cf6","#ec4899","#10b981","#f59e0b","#ef4444"]}):null}function k(e){let{isOpen:t,onClose:s,onSuccess:n,eventId:i}=e,[l,o]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1),[D,k]=(0,a.useState)("input"),[_,C]=(0,a.useState)(!1),[S,T]=(0,a.useState)(""),[A,O]=(0,a.useState)(""),[Z,B]=(0,a.useState)(""),[q,z]=(0,a.useState)(""),[P,R]=(0,a.useState)("");(0,a.useEffect)(()=>{t&&i&&V()},[t,i]);let V=async()=>{try{let e=await fetch("/api/events/".concat(i,"/auth-settings"));if(!e.ok)throw Error("Failed to fetch auth settings");let t=await e.json();o(t.auth_settings)}catch(e){console.error("Error fetching auth settings:",e),console.log("Using mock auth settings for demo"),o({require_email:!0,require_phone:!1,require_otp:!1})}},H=()=>{let e=!0;return z(""),R(""),(null==l?void 0:l.require_email)&&(S.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S)||(z("Email kh\xf4ng hợp lệ"),e=!1):(z("Vui l\xf2ng nhập email"),e=!1)),(null==l?void 0:l.require_phone)&&(A.trim()?/^\d{10,11}$/.test(A.replace(/\s/g,""))||(R("Số điện thoại phải c\xf3 10-11 chữ số"),e=!1):(R("Vui l\xf2ng nhập số điện thoại"),e=!1)),e},I=async()=>{if(H()){u(!0);try{if(null==l?void 0:l.require_otp){let e=await fetch("/api/auth/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event_id:i,email:l.require_email?S:void 0,phone:l.require_phone?A:void 0})});if(!e.ok){let t=await e.json();throw Error(t.message||"Gửi OTP thất bại")}F.A.success("M\xe3 OTP đ\xe3 được gửi!"),k("otp")}else{let e=await fetch("/api/auth/quick-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event_id:i,email:(null==l?void 0:l.require_email)?S:void 0,phone:(null==l?void 0:l.require_phone)?A:void 0})});if(!e.ok){let t=await e.json();throw Error(t.message||"Đăng nhập thất bại")}let t=await e.json();F.A.success("Đăng nhập th\xe0nh c\xf4ng!"),C(!0),setTimeout(()=>{n(t.voter_id),G()},1e3)}}catch(e){console.error("Auth error:",e),F.A.error(e instanceof Error?e.message:"C\xf3 lỗi xảy ra")}finally{u(!1)}}},M=async()=>{if(6!==Z.length){F.A.error("Vui l\xf2ng nhập đủ 6 chữ số");return}u(!0);try{let e=await fetch("/api/auth/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event_id:i,email:(null==l?void 0:l.require_email)?S:void 0,phone:(null==l?void 0:l.require_phone)?A:void 0,otp:Z})});if(!e.ok){let t=await e.json();throw Error(t.message||"X\xe1c thực OTP thất bại")}let t=await e.json();F.A.success("X\xe1c thực th\xe0nh c\xf4ng!"),C(!0),setTimeout(()=>{n(t.voter_id),G()},1e3)}catch(e){console.error("OTP verification error:",e),F.A.error(e instanceof Error?e.message:"M\xe3 OTP kh\xf4ng đ\xfang")}finally{u(!1)}},G=()=>{T(""),O(""),B(""),k("input"),z(""),R(""),s()},Y=async()=>{u(!0);try{if(!(await fetch("/api/auth/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event_id:i,email:(null==l?void 0:l.require_email)?S:void 0,phone:(null==l?void 0:l.require_phone)?A:void 0})})).ok)throw Error("Gửi lại OTP thất bại");F.A.success("Đ\xe3 gửi lại m\xe3 OTP!")}catch(e){F.A.error("Kh\xf4ng thể gửi lại OTP")}finally{u(!1)}};return l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E,{show:_,duration:3e3}),(0,r.jsx)(c,{open:t,onOpenChange:G,children:(0,r.jsxs)(h,{className:"sm:max-w-md",children:[(0,r.jsxs)(m,{children:[(0,r.jsx)(f,{className:"text-2xl",children:(()=>{if("otp"===D)return"X\xe1c thực OTP";if((null==l?void 0:l.require_email)&&(null==l?void 0:l.require_phone));else if(null==l?void 0:l.require_email)return"Nhập Email";else if(null==l?void 0:l.require_phone)return"Nhập Số điện thoại";return"Đăng nhập"})()}),(0,r.jsx)(x,{className:"text-base",children:(()=>{if("otp"===D){let e=(null==l?void 0:l.require_email)?S:A;return"Nhập m\xe3 OTP đ\xe3 được gửi đến ".concat(e)}return(null==l?void 0:l.require_otp)?"Ch\xfang t\xf4i sẽ gửi m\xe3 x\xe1c thực để đảm bảo bạn l\xe0 người thật":"Nhập th\xf4ng tin để bắt đầu b\xecnh chọn"})()})]}),"input"===D?(0,r.jsxs)("div",{className:"space-y-4 py-4",children:[l.require_email&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v._,{htmlFor:"email",className:"text-base",children:"Email"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(j.Z,{className:"absolute left-3 top-3 h-5 w-5 text-muted-foreground"}),(0,r.jsx)(g.I,{id:"email",type:"email",placeholder:"ten@email.com",className:"pl-10 h-12 text-base",value:S,onChange:e=>{T(e.target.value),z("")},disabled:d})]}),q&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:q})]}),l.require_phone&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v._,{htmlFor:"phone",className:"text-base",children:"Số điện thoại"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(N.Z,{className:"absolute left-3 top-3 h-5 w-5 text-muted-foreground"}),(0,r.jsx)(g.I,{id:"phone",type:"tel",placeholder:"0912345678",className:"pl-10 h-12 text-base",value:A,onChange:e=>{O(e.target.value),R("")},disabled:d})]}),P&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:P})]}),(0,r.jsx)(p.z,{onClick:I,disabled:d,className:"w-full h-12 text-base rounded-full",size:"lg",children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.Z,{className:"mr-2 h-5 w-5 animate-spin"}),"Đang xử l\xfd..."]}):l.require_otp?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.Z,{className:"mr-2 h-5 w-5"}),"Gửi m\xe3 x\xe1c thực"]}):"Bắt đầu b\xecnh chọn"})]}):(0,r.jsxs)("div",{className:"space-y-6 py-4",children:[(0,r.jsx)(w,{value:Z,onChange:B,length:6,disabled:d}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(p.z,{onClick:M,disabled:d||6!==Z.length,className:"w-full h-12 text-base rounded-full",size:"lg",children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.Z,{className:"mr-2 h-5 w-5 animate-spin"}),"Đang x\xe1c thực..."]}):"X\xe1c nhận"}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)(p.z,{variant:"ghost",onClick:()=>k("input"),disabled:d,className:"h-auto p-0 text-muted-foreground hover:text-foreground",children:"← Quay lại"}),(0,r.jsx)(p.z,{variant:"ghost",onClick:Y,disabled:d,className:"h-auto p-0 text-primary hover:text-primary/80",children:"Gửi lại OTP"})]})]})]})]})})]}):(0,r.jsx)(c,{open:t,onOpenChange:G,children:(0,r.jsx)(h,{className:"sm:max-w-md",children:(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)(b.Z,{className:"h-8 w-8 animate-spin text-primary"})})})})}var _=s(4133),C=s(6070),S=s(5974),T=s(9270),A=s(401);let O=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(T.fC,{ref:t,className:(0,o.cn)("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...a,children:(0,r.jsx)(T.z$,{className:(0,o.cn)("grid place-content-center text-current"),children:(0,r.jsx)(A.Z,{className:"h-4 w-4"})})})});O.displayName=T.fC.displayName;var Z=s(6831),B=s(6901);function q(e){let{category:t,selectedCandidates:s,onToggleCandidate:a}=e;s.length,t.max_votes_per_voter;let n=s.length>=t.max_votes_per_voter;return(0,r.jsxs)(C.Zb,{className:"border-2 border-[#FFD700]/30 bg-[#1a1a1a]",children:[(0,r.jsx)(C.Ol,{className:"bg-gradient-to-r from-[#FFD700]/10 to-purple-600/10 border-b border-[#FFD700]/20",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(C.ll,{className:"text-2xl flex items-center gap-2 text-white",children:[t.emoji&&(0,r.jsx)("span",{children:t.emoji}),t.name]}),t.description&&(0,r.jsx)(C.SZ,{className:"mt-2 text-[#FAF3E0]/70",children:t.description})]}),(0,r.jsxs)(S.C,{className:"text-sm ".concat(n?"bg-gradient-to-r from-[#FFD700] to-[#FDB931] text-black border-0":"bg-[#1a1a1a] text-[#FAF3E0] border-[#FFD700]/30"),children:["Đ\xe3 chọn: ",s.length,"/",t.max_votes_per_voter]})]})}),(0,r.jsxs)(C.aY,{className:"p-6",children:[(0,r.jsx)(_.E.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.08}}},children:t.candidates.map((e,t)=>{let i=s.includes(e.id),l=!i&&n;return(0,r.jsx)(_.E.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:l?{}:{scale:1.03,y:-4},whileTap:l?{}:{scale:.98},transition:{type:"spring",stiffness:300,damping:20},children:(0,r.jsxs)(C.Zb,{className:"cursor-pointer transition-all relative overflow-hidden ".concat(i?"border-[#FFD700] border-2 bg-[#FFD700]/10 shadow-lg shadow-[#FFD700]/30":l?"opacity-50 cursor-not-allowed border-[#FFD700]/10 bg-[#0B0B0B]":"border-[#FFD700]/20 bg-[#0B0B0B] hover:border-[#FFD700]/60 hover:bg-[#FFD700]/5 hover:shadow-lg hover:shadow-[#FFD700]/20"),onClick:()=>{l||a(e.id)},children:[!l&&!i&&(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-[#FFD700]/0 via-[#FFD700]/5 to-[#FFD700]/0 opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"}),i&&(0,r.jsx)(_.E.div,{className:"absolute top-2 right-2",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:300,damping:15},children:(0,r.jsx)("div",{className:"bg-[#FFD700] rounded-full p-1",children:(0,r.jsx)(B.Z,{className:"h-5 w-5 text-black"})})}),(0,r.jsx)(C.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(_.E.div,{whileHover:{scale:1.1,rotate:5},transition:{type:"spring",stiffness:400,damping:10},children:(0,r.jsxs)(Z.qE,{className:"h-16 w-16 border-2 transition-all ".concat(i?"border-[#FFD700] shadow-lg shadow-[#FFD700]/50":"border-[#FFD700]/30"),children:[(0,r.jsx)(Z.F$,{src:e.photo_url||"",alt:e.name}),(0,r.jsx)(Z.Q5,{className:"text-lg font-semibold bg-gradient-to-br from-[#FFD700]/20 to-purple-600/20 text-[#FFD700]",children:e.name.slice(0,2).toUpperCase()})]})}),(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsx)("h3",{className:"font-semibold text-base truncate transition-colors ".concat(i?"text-[#FFD700]":"text-white"),children:e.name})})]}),e.description&&(0,r.jsx)("p",{className:"text-sm text-[#FAF3E0]/70 line-clamp-2 leading-relaxed",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t border-[#FFD700]/10",children:[(0,r.jsx)(O,{checked:i,disabled:l,className:"data-[state=checked]:bg-[#FFD700] data-[state=checked]:border-[#FFD700]",onCheckedChange:()=>{l||a(e.id)}}),(0,r.jsx)("span",{className:"text-xs text-[#FAF3E0]/60",children:i?"Đ\xe3 chọn":"Chọn ứng vi\xean"})]})]})})]})},e.id)})}),0===t.candidates.length&&(0,r.jsx)("div",{className:"text-center py-8 text-[#FAF3E0]/70",children:"Chưa c\xf3 ứng vi\xean n\xe0o"})]})]})}var z=s(1131);function P(){let[e,t]=(0,a.useState)(!1),[s,i]=(0,a.useState)(null),[l,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)([]),[u,h]=(0,a.useState)(!1),[m,f]=(0,a.useState)(!1),[x,g]=(0,a.useState)({}),[v,j]=(0,a.useState)(null),[N,w]=(0,a.useState)(""),[D,_]=(0,a.useState)(!1),[T,A]=(0,a.useState)(!1),O=(0,a.useMemo)(()=>{let e=new Date;return e.setHours(21,0,0,0),e.getTime()<Date.now()&&e.setDate(e.getDate()+1),e},[]);(0,a.useEffect)(()=>{Z()},[]),(0,a.useEffect)(()=>{v&&P()},[v]);let Z=async()=>{try{let e=await fetch("/api/events/active");if(e.ok){let t=await e.json();j(t.event.id),w(t.event.name)}else console.log("Event not found - using demo mode")}catch(e){console.error("Error loading active event:",e)}},P=async()=>{if(v){h(!0);try{let e=await fetch("/api/events/".concat(v,"/categories"));if(!e.ok)throw Error("Failed to load categories");let t=((await e.json()).categories||[]).map(e=>({...e,candidates:e.candidates.map(e=>({...e,photo_url:e.photo_url||"https://i.pravatar.cc/400?img=".concat(Math.floor(70*Math.random())+1)}))}));d(t)}catch(e){console.error("Error loading categories:",e)}finally{h(!1)}}},R=async e=>{i(e),t(!0),o(!1);try{let t=await fetch("/api/votes/voter/".concat(e));if(t.ok){let e=await t.json();g(t=>({...e.votes,...t}))}}catch(e){console.error("Error loading existing votes:",e)}await I(e)},V=(e,t)=>{if(T){F.A.error("Thời gian b\xecnh chọn đ\xe3 kết th\xfac");return}g(s=>{let r=s[e]||[];return r.includes(t)?{...s,[e]:r.filter(e=>e!==t)}:{...s,[e]:[...r,t]}})},H=async()=>{if(T){F.A.error("Thời gian b\xecnh chọn đ\xe3 kết th\xfac");return}if(!Object.values(x).some(e=>e.length>0)){F.A.error("Vui l\xf2ng chọn \xedt nhất một ứng vi\xean");return}if(!e||!s){o(!0);return}await I(s)},I=async e=>{f(!0);try{let t=Object.entries(x).filter(e=>{let[t,s]=e;return s.length>0}).map(e=>{let[t,s]=e;return{category_id:t,candidate_ids:s}}),s=await fetch("/api/votes/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({voter_id:e,event_id:v,votes:t})});if(!s.ok){let e=await s.json();throw Error(e.message||"Gửi b\xecnh chọn thất bại")}F.A.success("B\xecnh chọn của bạn đ\xe3 được ghi nhận!"),_(!0)}catch(e){console.error("Error submitting votes:",e),F.A.error(e instanceof Error?e.message:"C\xf3 lỗi xảy ra")}finally{f(!1)}},M=()=>Object.values(x).reduce((e,t)=>e+t.length,0);return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-[#0B0B0B] via-[#1a1a1a] to-[#0B0B0B]",children:[(0,r.jsx)(n.Z,{}),(0,r.jsx)(E,{show:D,duration:5e3}),(0,r.jsxs)("div",{className:"container px-4 py-8 max-w-6xl",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-2 text-white",children:"B\xecnh chọn"}),(0,r.jsx)("p",{className:"text-[#FAF3E0]/70",children:"Chọn ứng vi\xean y\xeau th\xedch của bạn"})]}),(0,r.jsx)("div",{className:"w-full max-w-2xl",children:(0,r.jsx)(z.Z,{endTime:O,onTimeUp:()=>{A(!0),F.A.error("Thời gian b\xecnh chọn đ\xe3 kết th\xfac!")}})})]})}),v&&(0,r.jsx)(k,{isOpen:l,onClose:()=>o(!1),onSuccess:R,eventId:v}),u?(0,r.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,r.jsx)(b.Z,{className:"h-12 w-12 animate-spin text-[#FFD700]"})}):0===c.length?(0,r.jsx)(C.Zb,{className:"max-w-2xl mx-auto border-2 border-[#FFD700]/20 bg-[#1a1a1a]",children:(0,r.jsxs)(C.aY,{className:"p-12 text-center space-y-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2 text-white",children:"Chưa c\xf3 danh mục n\xe0o"}),(0,r.jsx)("p",{className:"text-[#FAF3E0]/70",children:"Sự kiện n\xe0y chưa c\xf3 danh mục b\xecnh chọn"})]})}):(0,r.jsxs)("div",{className:"space-y-8",children:[T&&(0,r.jsxs)(S.C,{variant:"destructive",className:"w-full justify-center py-3 text-base",children:[(0,r.jsx)(y.Z,{className:"mr-2 h-5 w-5"}),"Đ\xe3 hết thời gian b\xecnh chọn"]}),c.map(e=>(0,r.jsx)(q,{category:e,selectedCandidates:x[e.id]||[],onToggleCandidate:t=>V(e.id,t)},e.id)),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("p",{className:"text-sm text-[#FAF3E0]/70 mb-2",children:["Tổng số phiếu đ\xe3 chọn: ",M()]}),!e&&M()>0&&!T&&(0,r.jsx)("p",{className:"text-xs text-[#FFE68A] mt-1",children:"\uD83D\uDCA1 Bạn sẽ cần đăng nhập để gửi b\xecnh chọn"})]}),(0,r.jsx)(p.z,{size:"lg",className:"px-12 rounded-full bg-gradient-to-r from-[#FFD700] to-[#FDB931] hover:from-[#FDB931] hover:to-[#FFD700] text-black font-semibold shadow-lg hover:shadow-[#FFD700]/50 transition-all duration-300",disabled:m||0===M()||T,onClick:H,children:T?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.Z,{className:"mr-2 h-5 w-5"}),"Đ\xe3 hết thời gian"]}):m?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.Z,{className:"mr-2 h-5 w-5 animate-spin"}),"Đang gửi..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(B.Z,{className:"mr-2 h-5 w-5"}),e?"X\xe1c nhận b\xecnh chọn":"Đăng nhập & Gửi b\xecnh chọn"]})})]})]})]})]})}},1131:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var r=s(7437),a=s(2265),n=s(4133),i=s(1723);function l(e){let{endTime:t,onTimeUp:s}=e,[l,o]=(0,a.useState)({hours:0,minutes:0,seconds:0,isExpired:!1});return((0,a.useEffect)(()=>{let e=()=>{let e=new Date().getTime(),r=t.getTime()-e;if(r<=0){o({hours:0,minutes:0,seconds:0,isExpired:!0}),s&&s();return}o({hours:Math.floor(r%864e5/36e5),minutes:Math.floor(r%36e5/6e4),seconds:Math.floor(r%6e4/1e3),isExpired:!1})};e();let r=setInterval(e,1e3);return()=>clearInterval(r)},[t,s]),l.isExpired)?(0,r.jsxs)(n.E.div,{className:"flex items-center justify-center gap-3 px-8 py-4 rounded-full bg-gradient-to-r from-red-600/20 to-red-800/20 border-2 border-red-600",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:[(0,r.jsx)(i.Z,{className:"h-6 w-6 text-red-500"}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-lg font-bold text-red-500",children:"HẾT GIỜ B\xccNH CHỌN"}),(0,r.jsx)("p",{className:"text-sm text-red-400",children:"Kết quả đ\xe3 được chốt"})]})]}):(0,r.jsxs)(n.E.div,{className:"flex items-center justify-center gap-3 px-8 py-4 rounded-full bg-gradient-to-r from-[#FFD700]/20 to-[#FDB931]/20 border-2 border-[#FFD700]",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:[(0,r.jsx)(n.E.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:1,repeat:1/0,repeatDelay:2},children:(0,r.jsx)(i.Z,{className:"h-6 w-6 text-[#FFD700]"})}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(n.E.div,{className:"text-3xl md:text-4xl font-bold text-[#FFD700] font-mono",initial:{scale:1.2,color:"#FFF"},animate:{scale:1,color:"#FFD700"},transition:{duration:.3},children:String(l.hours).padStart(2,"0")},l.hours),(0,r.jsx)("p",{className:"text-xs text-[#FFE68A] font-medium mt-1",children:"giờ"})]}),(0,r.jsx)("span",{className:"text-3xl md:text-4xl font-bold text-[#FFD700] animate-pulse",children:":"}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(n.E.div,{className:"text-3xl md:text-4xl font-bold text-[#FFD700] font-mono",initial:{scale:1.2,color:"#FFF"},animate:{scale:1,color:"#FFD700"},transition:{duration:.3},children:String(l.minutes).padStart(2,"0")},l.minutes),(0,r.jsx)("p",{className:"text-xs text-[#FFE68A] font-medium mt-1",children:"ph\xfat"})]}),(0,r.jsx)("span",{className:"text-3xl md:text-4xl font-bold text-[#FFD700] animate-pulse",children:":"}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(n.E.div,{className:"text-3xl md:text-4xl font-bold text-[#FFD700] font-mono",initial:{scale:1.2,color:"#FFF"},animate:{scale:1,color:"#FFD700"},transition:{duration:.3},children:String(l.seconds).padStart(2,"0")},l.seconds),(0,r.jsx)("p",{className:"text-xs text-[#FFE68A] font-medium mt-1",children:"gi\xe2y"})]})]})]})}},4196:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var r=s(7437),a=s(7648),n=s(2869),i=s(8617),l=s(6221),o=s(8728);function c(){return(0,r.jsx)("header",{className:"sticky top-0 z-50 w-full border-b border-[#FFD700]/20 bg-[#0B0B0B]/95 backdrop-blur supports-[backdrop-filter]:bg-[#0B0B0B]/80",children:(0,r.jsxs)("div",{className:"container flex h-16 items-center justify-between",children:[(0,r.jsxs)(a.default,{href:"/",className:"flex items-center space-x-2 group",children:[(0,r.jsx)(i.Z,{className:"h-6 w-6 text-[#FFD700] group-hover:scale-110 transition-transform"}),(0,r.jsx)("span",{className:"text-xl font-bold bg-gradient-to-r from-[#FFD700] to-[#FDB931] bg-clip-text text-transparent",children:"King & Queen Gala"})]}),(0,r.jsxs)("nav",{className:"flex items-center gap-2",children:[(0,r.jsx)(n.z,{variant:"ghost",asChild:!0,className:"hidden sm:flex text-[#FAF3E0] hover:text-[#FFD700] hover:bg-[#FFD700]/10",children:(0,r.jsxs)(a.default,{href:"/results",children:[(0,r.jsx)(l.Z,{className:"mr-2 h-4 w-4"}),"Kết quả"]})}),(0,r.jsx)(n.z,{variant:"ghost",size:"icon",asChild:!0,className:"sm:hidden text-[#FAF3E0] hover:text-[#FFD700] hover:bg-[#FFD700]/10",children:(0,r.jsx)(a.default,{href:"/results",children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(n.z,{variant:"ghost",size:"icon",asChild:!0,className:"text-[#FAF3E0] hover:text-[#FFD700] hover:bg-[#FFD700]/10",children:(0,r.jsx)(a.default,{href:"/admin/dashboard",children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})})]})]})})}},6831:function(e,t,s){"use strict";s.d(t,{F$:function(){return o},Q5:function(){return c},qE:function(){return l}});var r=s(7437),a=s(2265),n=s(7954),i=s(4508);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.fC,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a})});l.displayName=n.fC.displayName;let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.Ee,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",s),...a})});o.displayName=n.Ee.displayName;let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.NY,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...a})});c.displayName=n.NY.displayName},5974:function(e,t,s){"use strict";s.d(t,{C:function(){return l}});var r=s(7437);s(2265);var a=s(535),n=s(4508);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...a})}},2869:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var r=s(7437),a=s(2265),n=s(7053),i=s(535),l=s(4508);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(o({variant:a,size:i,className:s})),ref:t,...d})});c.displayName="Button"},6070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var r=s(7437),a=s(2265),n=s(4508);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},5186:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var r=s(7437),a=s(2265),n=s(4508);let i=a.forwardRef((e,t)=>{let{className:s,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});i.displayName="Input"},6815:function(e,t,s){"use strict";s.d(t,{_:function(){return c}});var r=s(7437),a=s(2265),n=s(370),i=s(535),l=s(4508);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.f,{ref:t,className:(0,l.cn)(o(),s),...a})});c.displayName=n.f.displayName},4508:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(1994),a=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[554,438,880,785,687,971,117,744],function(){return e(e.s=3114)}),_N_E=e.O()}]);