(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[25],{8052:function(e,t,r){Promise.resolve().then(r.bind(r,827))},827:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var n=r(7437),s=r(2265),a=r(6070),i=r(6815),o=r(5186),c=r(2869),d=r(721),l=r(4508);let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(d.fC,{className:(0,l.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...s,ref:t,children:(0,n.jsx)(d.bU,{className:(0,l.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});u.displayName=d.fC.displayName;var f=r(5974),m=r(5863),h=r(8728),g=r(1047),x=r(1723),p=r(3229),v=r(4438);function b(){let[e,t]=(0,s.useState)(null),[r,d]=(0,s.useState)(!0),[l,b]=(0,s.useState)(!1),[j,y]=(0,s.useState)(""),[N,w]=(0,s.useState)(""),[k,_]=(0,s.useState)(!1);(0,s.useEffect)(()=>{C()},[]);let C=async()=>{try{let e=await fetch("/api/admin/settings");if(!e.ok)throw Error("Failed to load settings");let r=await e.json();r.event&&(t(r.event),y(S(r.event.voting_start_time)),w(S(r.event.voting_end_time)),_(r.event.is_active))}catch(e){console.error("Error loading settings:",e),v.A.error("Kh\xf4ng thể tải c\xe0i đặt")}finally{d(!1)}},S=e=>{let t=new Date(e),r=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");return"".concat(r,"-").concat(n,"-").concat(s,"T").concat(a,":").concat(i)},Z=async()=>{if(!e){v.A.error("Kh\xf4ng c\xf3 sự kiện để cập nhật");return}if(!j||!N){v.A.error("Vui l\xf2ng nhập đầy đủ thời gian");return}if(new Date(j)>=new Date(N)){v.A.error("Thời gian kết th\xfac phải sau thời gian bắt đầu");return}b(!0);try{let r=await fetch("/api/admin/settings",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:e.id,voting_start_time:new Date(j).toISOString(),voting_end_time:new Date(N).toISOString(),is_active:k})});if(!r.ok)throw Error("Failed to update settings");let n=await r.json();t(n.event),v.A.success("Cập nhật c\xe0i đặt th\xe0nh c\xf4ng!")}catch(e){console.error("Error updating settings:",e),v.A.error("Kh\xf4ng thể cập nhật c\xe0i đặt")}finally{b(!1)}};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"C\xe0i đặt Sự kiện"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Cấu h\xecnh thời gian v\xe0 trạng th\xe1i sự kiện"})]}),r?(0,n.jsx)(a.Zb,{children:(0,n.jsx)(a.aY,{className:"p-12 text-center",children:(0,n.jsx)(m.Z,{className:"h-12 w-12 animate-spin text-muted-foreground mx-auto"})})}):e?(0,n.jsxs)("div",{className:"grid gap-6 max-w-3xl",children:[(0,n.jsxs)(a.Zb,{children:[(0,n.jsx)(a.Ol,{children:(0,n.jsxs)(a.ll,{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{children:e.name}),(0,n.jsx)(f.C,{variant:k?"default":"secondary",children:k?"Active":"Inactive"})]})}),(0,n.jsxs)(a.aY,{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)(i._,{htmlFor:"start-time",className:"flex items-center gap-2",children:[(0,n.jsx)(g.Z,{className:"h-4 w-4"}),"Thời gian bắt đầu"]}),(0,n.jsx)(o.I,{id:"start-time",type:"datetime-local",value:j,onChange:e=>y(e.target.value)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)(i._,{htmlFor:"end-time",className:"flex items-center gap-2",children:[(0,n.jsx)(x.Z,{className:"h-4 w-4"}),"Thời gian kết th\xfac"]}),(0,n.jsx)(o.I,{id:"end-time",type:"datetime-local",value:N,onChange:e=>w(e.target.value)})]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(i._,{htmlFor:"is-active",className:"text-base font-medium",children:"K\xedch hoạt sự kiện"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Cho ph\xe9p người d\xf9ng b\xecnh chọn"})]}),(0,n.jsx)(u,{id:"is-active",checked:k,onCheckedChange:_})]}),(0,n.jsx)("div",{className:"pt-4",children:(0,n.jsx)(c.z,{onClick:Z,disabled:l,className:"w-full md:w-auto",children:l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Đang lưu..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Lưu thay đổi"]})})})]})]}),(0,n.jsxs)(a.Zb,{children:[(0,n.jsx)(a.Ol,{children:(0,n.jsx)(a.ll,{children:"Th\xf4ng tin Hệ thống"})}),(0,n.jsxs)(a.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(i._,{children:"Event ID"}),(0,n.jsx)(o.I,{value:e.id,disabled:!0,className:"font-mono text-xs"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(i._,{children:"Mật khẩu Admin"}),(0,n.jsx)(o.I,{type:"password",value:"admin123",disabled:!0}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Thay đổi trong file .env.local"})]})]})]})]}):(0,n.jsx)(a.Zb,{children:(0,n.jsxs)(a.aY,{className:"p-12 text-center space-y-4",children:[(0,n.jsx)(h.Z,{className:"h-12 w-12 text-muted-foreground mx-auto"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Kh\xf4ng t\xecm thấy sự kiện active"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Vui l\xf2ng tạo v\xe0 k\xedch hoạt một sự kiện trước"})]})]})})]})}},5974:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var n=r(7437);r(2265);var s=r(535),a=r(4508);let i=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,a.cn)(i({variant:r}),t),...s})}},2869:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var n=r(7437),s=r(2265),a=r(7053),i=r(535),o=r(4508);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:d=!1,...l}=e,u=d?a.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(c({variant:s,size:i,className:r})),ref:t,...l})});d.displayName="Button"},6070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return l},ll:function(){return c}});var n=r(7437),s=r(2265),a=r(4508);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});c.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...s})});l.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},5186:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var n=r(7437),s=r(2265),a=r(4508);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,n.jsx)("input",{type:s,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});i.displayName="Input"},6815:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var n=r(7437),s=r(2265),a=r(370),i=r(535),o=r(4508);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,o.cn)(c(),r),...s})});d.displayName=a.f.displayName},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(1994),s=r(3335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}}},function(e){e.O(0,[554,438,752,971,117,744],function(){return e(e.s=8052)}),_N_E=e.O()}]);